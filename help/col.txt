Инструкция по col (column filter)

Основные опции:
col — фильтр обратных переводов строк и обратных ходов
col -b — убрать обратные ходы (backspace)
col -x — преобразовать табуляции в пробелы
col -p — пропускать неизвестные escape-последовательности
col -f — разрешить прямое движение (forward half-line)
col -l N — буферизовать не менее N строк (по умолчанию 128)

Обработка символов:
Удаляет/обрабатывает:
    Backspace (0x08) — удаляет предыдущий символ
    Carriage return (0x0D) — возврат каретки
    Escape-последовательности ANSI
    Полусмещения (half-line motions)

Примеры:
man ls | col -b — man страница без обратных ходов
cat file.txt | col — очистка управляющих символов
groff -Tascii -man file.1 | col -b — конвертация man страниц
col -x < input.txt > output.txt — замена табов на пробелы
col -b -x — убрать backspace и заменить табы
col -p -b — пропускать неизвестные последовательности и убирать backspace

Практическое использование:
help command | col -b — вывод help без форматирования
colrm — родственная команда для удаления колонок

Обработка вывода nroff/groff:
    # Конвертация man страницы в чистый текст
    man man | col -b > man.txt

Удаление escape-последовательностей:
    # ANSI цветные коды → обычный текст
    ls --color=always | col -b

Работа с обратными ходами:
Файл с обратными ходами (например, из man):
    Hel^Hl^Ho^H   # ^H = backspace

После col -b: Hello

Сочетание с другими командами:
tbl input | nroff | col — обработка таблиц
eqn input | troff | col — математические формулы

Пример файла с обратными ходами:
    echo -e "H\be\bl\bl\bo" | col -b  # Hello
    # \b = backspace: H ← e ← l ← l ← o

Ограничения:
col в основном используется для:
    Обработки вывода текстовых процессоров (nroff, troff)
    Конвертации man страниц
    Очистки текста от управляющих символов

Необычные escape-последовательности:
col -p пропускает неизвестные последовательности вместо ошибки

Историческое использование:
Изначально для обработки вывода текстовых процессоров на печатающих устройствах

Современные альтернативы:
sed 's/.\x08//g' — удаление backspace
ansi2txt — конвертация ANSI escape codes
cat -v или cat -A — просмотр непечатных символов

Пример скрипта:
    #!/bin/bash
    # Конвертация всех man страниц в txt
    for cmd in $(ls /bin /usr/bin | head -20); do
        man "$cmd" 2>/dev/null | col -b > "/tmp/${cmd}.txt"
    done

Отладка:
echo -e "test\b\b\b" | cat -A — посмотреть сырые символы
echo -e "test\b\b\b" | col -b | cat -A — после обработки

Справка:
col --help или man col

Примечание:
col — утилита из набора util-linux, есть не во всех дистрибутивах
Чаще используется в pipeline после текстовых процессоров
