Инструкция по test

Синтаксис:
test условие
[ условие ] — синоним test (пробелы обязательны)

Проверка файлов:
test -e file — файл существует
test -f file — обычный файл
test -d file — директория
test -L file — символическая ссылка
test -b file — блочное устройство
test -c file — символьное устройство
test -p file — именованный канал
test -S file — сокет

Права доступа:
test -r file — доступен для чтения
test -w file — доступен для записи
test -x file — доступен для выполнения
test -s file — размер больше нуля

Атрибуты файлов:
test -N file — изменён после последнего чтения
test -O file — владелец текущий пользователь
test -G file — группа текущая группа пользователя
test -g file — установлен бит set-group-id
test -u file — установлен бит set-user-id
test -k file — установлен sticky-bit

Сравнение файлов:
test file1 -nt file2 — file1 новее file2
test file1 -ot file2 — file1 старше file2
test file1 -ef file2 — одинаковые файлы (жесткие ссылки)

Строковые сравнения:
test -z "$str" — строка пустая
test -n "$str" — строка не пустая
test "$str1" = "$str2" — строки равны
test "$str1" != "$str2" — строки не равны
test "$str1" < "$str2" — меньше в лексикографическом порядке
test "$str1" > "$str2" — больше в лексикографическом порядке

Числовые сравнения:
test n -eq m — равно
test n -ne m — не равно
test n -lt m — меньше
test n -le m — меньше или равно
test n -gt m — больше
test n -ge m — больше или равно

Логические операторы:
test ! условие — НЕ
test условие1 -a условие2 — И
test условие1 -o условие2 — ИЛИ

Группировка в скобках:
test \( условие \) — группировка (экранировать скобки)

Комбинированные проверки:
test -f file -a -r file — обычный файл И доступен для чтения
test -d dir -o -L dir — директория ИЛИ символическая ссылка

Современный синтаксис:
[[ условие ]] — расширенный test (bash, ksh)
(( выражение )) — арифметические выражения

Отличия [ ] и [[ ]]:
    [[ ]] не требует кавычек для переменных
    [[ ]] поддерживает &&, || вместо -a, -o
    [[ ]] имеет расширенные операторы =~, == с шаблонами

Проверка в командной строке:
[ -f /etc/passwd ] && echo "Существует"
test -x /bin/bash && echo "Исполняемый"
