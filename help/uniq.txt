Инструкция по uniq

Основные опции:
uniq — удалить повторяющиеся строки (только соседние)
uniq -c — подсчитать количество повторений
uniq -d — вывести только повторяющиеся строки
uniq -u — вывести только уникальные строки

Сравнение:
uniq -i — игнорировать регистр при сравнении
uniq -f N — игнорировать первые N полей
uniq -s N — игнорировать первые N символов
uniq -w N — сравнивать только первые N символов

Поля и символы:
uniq -f 2 — пропустить 2 поля перед сравнением
uniq -s 5 — пропустить 5 символов перед сравнением
uniq -w 10 — сравнивать только первые 10 символов

Примеры:
uniq file.txt — удалить повторяющиеся соседние строки
sort file.txt | uniq — удалить все дубликаты (с сортировкой)
uniq -c file.txt — подсчитать повторения
uniq -d file.txt — показать только дубликаты
uniq -u file.txt — показать только уникальные строки
uniq -i file.txt — игнорировать регистр
uniq -f 1 file.txt — игнорировать первое поле
uniq -s 3 file.txt — игнорировать первые 3 символа
uniq -w 5 file.txt — сравнивать только первые 5 символов

Комбинации:
sort file.txt | uniq -c | sort -nr — топ повторяющихся строк
uniq -c | awk '$1 > 1' — строки повторяющиеся больше 1 раза
uniq -f 2 -i file.txt — игнорировать первые 2 поля и регистр

Работа с полями:
echo -e "a b c\na d e\na b f" | uniq -f 1 — строки равны после 1-го поля
echo -e "123abc\n456abc\n789def" | uniq -w 3 — сравнивать по первым 3 символам

Типичное использование:
logfile.txt | cut -d' ' -f1 | sort | uniq -c — подсчёт уникальных IP в логе
ps aux | awk '{print $1}' | sort | uniq — список пользователей с процессами

Замечание:
uniq работает только с отсортированным вводом
Для удаления всех дубликатов используйте sort -u
