Инструкция по stat

Основные опции:
stat файл — информация о файле
stat -c формат файл — пользовательский формат
stat -f файл — информация о файловой системе
stat -L файл — следовать симлинкам
stat -t файл — компактный вывод (terse)

Форматы для -c (--format):
%n — имя файла
%s — размер в байтах
%b — количество выделенных блоков
%F — тип файла
%f — режим файла в hex
%u — UID владельца
%g — GID группы
%U — имя владельца
%G — имя группы
%a — права доступа в восьмеричном виде
%A — права в удобочитаемом виде

Временные метки:
%X — время последнего доступа (atime)
%Y — время последней модификации (mtime)
%Z — время последнего изменения статуса (ctime)
%W — время рождения (birth/creation)

Человеко-читаемые форматы:
%x — atime в читаемом виде
%y — mtime в читаемом виде
%z — ctime в читаемом виде
%w — birth time в читаемом виде

Примеры форматов:
%n:%s:%U:%G — имя:размер:пользователь:группа
%n %y — имя и время модификации

Информация о ФС (с -f):
%s — размер блока ФС
%b — всего блоков
%f — свободные блоки
%c — всего inodes
%d — свободные inodes
%i — ID ФС в hex
%l — максимальная длина имени файла
%t — тип ФС в hex
%T — тип ФС в читаемом виде

Множественные файлы:
stat файл1 файл2 файл3 — информация о нескольких файлах
stat * — все файлы в директории
stat -c "%n %s" *.txt — имена и размеры txt файлов

Примеры:
stat file.txt — полная информация о файле
stat -c "%n %s %y" file.txt — имя, размер, время изменения
stat -c "%A %U %G %n" /etc/passwd — права, владелец, группа, имя
stat -c "%s" large_file.iso — только размер файла в байтах
stat -c "%a" script.sh — права в восьмеричном виде
stat -c "%F" /dev/sda — тип файла (блочное устройство)
stat -f / — информация о корневой файловой системе
stat -L /usr/bin/python — информация о цели симлинка
stat -t /etc/hosts — компактный вывод
stat -c "%w" file.txt — время создания файла (если поддерживается)
stat -c "%X %x" file.txt — atime в секундах и читаемом виде
stat -c "%n имеет размер %s байт" file.txt — форматированная строка
stat -c "Владелец: %U(%u) Группа: %G(%g)" file.txt

Симлинки:
stat симлинк — информация о самом симлинке
stat -L симлинк — информация о цели симлинка

Права доступа:
stat -c "%a %A" file.txt — 644 -rw-r--r--

Размер в человеко-читаемом виде:
stat -c "%n: %s байт" file.txt | numfmt --to=iec — в KiB, MiB, GiB

Сравнение времени:
stat -c "%Y" file1.txt ; stat -c "%Y" file2.txt — сравнить mtime в секундах

Проверка inode:
stat -c "%i" file.txt — номер inode

Информация о директории:
stat . — информация о текущей директории
stat -c "%n содержит %b блоков" .

Файловая система:
stat -f -c "%T %b/%f блоков свободно" /home — тип ФС и свободное место

Множественные файлы с циклом:
for f in *.log; do stat -c "%n %y" "$f"; done

Файлы по шаблону:
find . -name "*.conf" -exec stat -c "%n %s" {} \;

Специальные файлы:
stat /dev/null — информация о /dev/null
stat /proc/self — информация о текущем процессе

Проверка существования с информацией:
stat файл 2>/dev/null && echo "Существует" || echo "Не существует"

Пользовательский вывод:
stat --printf="Файл: %n\nРазмер: %s\nИзменен: %y\n" file.txt

Сравнение с ls:
stat дает более детальную информацию чем ls -l

Практическое использование:
stat -c "%s %n" /var/log/*.log | sort -n — логи отсортированные по размеру
stat -c "%i" /etc/hosts /etc/hostname — сравнить inodes (жесткие ссылки)
stat -c "%Y" /etc/passwd — когда последний раз менялся файл паролей
stat -f -c "%t" / — тип ФС в hex (для идентификации)

Проверка времени изменения конфига:
stat -c "%y" /etc/nginx/nginx.conf — когда менялся конфиг nginx

Мониторинг изменений:
watch -n 1 'stat -c "%y" logfile.txt' — следить за временем изменения

Архитектура ФС:
stat -f -c "Блок: %s байт, Макс. длина имени: %l" /
