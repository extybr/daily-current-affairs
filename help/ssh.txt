Инструкция по ssh

Основное подключение:
ssh пользователь@хост — подключение
ssh хост — подключение с текущим именем пользователя
ssh -p порт хост — указать порт

Аутентификация:
ssh -i файл_ключа хост — указать файл приватного ключа
ssh -o PasswordAuthentication=no — отключить аутентификацию паролем
ssh -o PubkeyAuthentication=yes — включить аутентификацию по ключу

Команды:
ssh хост команда — выполнить команду на удалённом хосте
ssh -t хост команда — выделить TTY для команды

Перенаправление:
ssh -L локпорт:удалённыйхост:удалённыйпорт хост — локальный туннель
ssh -R удалённыйпорт:локхост:локпорт хост — удалённый туннель
ssh -D порт хост — SOCKS прокси

Файлы:
ssh -F конфиг_файл — указать конфигурационный файл
ssh -o "опция значение" — указать опцию в командной строке

Отладка:
ssh -v — подробный вывод (verbose)
ssh -vv — более подробный
ssh -vvv — максимально подробный

Опции безопасности:
ssh -o StrictHostKeyChecking=no — не проверять host key
ssh -o UserKnownHostsFile=/dev/null — не сохранять host key
ssh -o ConnectTimeout=секунды — таймаут подключения

Управление соединением:
ssh -N хост — не выполнять удалённые команды (только туннель)
ssh -f хост — перейти в фон после аутентификации
ssh -M -S сокет хост — мастер-режим для управления соединениями

Примеры:
ssh user@example.com — подключиться к example.com
ssh -p 2222 user@host — подключиться на порту 2222
ssh -i ~/.ssh/id_rsa host — использовать конкретный ключ
ssh host "ls -la" — выполнить ls на удалённом хосте
ssh -L 8080:localhost:80 host — туннель локального порта 8080 к порту 80 на host
ssh -R 2222:localhost:22 host — проброс удалённого порта 2222 к локальному SSH
ssh -D 1080 host — создать SOCKS прокси на порту 1080
ssh -v host — отладка подключения

SCP через SSH:
scp файл user@host:/путь — копировать файл
scp -P порт — указать порт для scp

SSHFS:
sshfs user@host:/путь /локальная/папка — монтировать удалённую папку

Конфигурация ~/.ssh/config:
    Host псевдоним
        HostName реальный_хост
        User пользователь
        Port порт
        IdentityFile путь_к_ключу
        
Примеры использования:
ssh -L 3306:localhost:3306 dbhost — туннель для MySQL
ssh -f -N -L 8080:localhost:80 webhost — фоновая проброска веб-сервера
ssh -o "ServerAliveInterval 60" host — отправлять keepalive каждые 60 секунд
ssh -A host — передача SSH agent forwarding
ssh -J user@jump host — подключение через jump host
