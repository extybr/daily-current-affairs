Инструкция по nl (number lines)

Основные опции:
nl файл — пронумеровать строки файла
nl -b a — нумеровать все строки (по умолчанию)
nl -b t — нумеровать только непустые строки
nl -b n — не нумеровать строки
nl -n ln — выравнивание по левому краю
nl -n rn — выравнивание по правому краю без ведущих нулей
nl -n rz — выравнивание по правому краю с ведущими нулями

Форматы нумерации:
-i N — шаг инкремента (по умолчанию 1)
-v N — начальный номер (по умолчанию 1)
-w N — ширина поля для номера (по умолчанию 6)
-s разделитель — разделитель между номером и строкой

Логические страницы:
-p — не сбрасывать нумерацию на логических страницах
-d CC — разделитель логических страниц (по умолчанию :)

Примеры:

1. Базовая нумерация:
    nl file.txt
    #      1  первая строка
    #      2  вторая строка

2. Только непустые строки:
    nl -b t file.txt
    # пустые строки не нумеруются

3. Стиль нумерации:
    nl -n ln file.txt    # left, no leading zeros
    # 1      строка
    nl -n rn file.txt    # right, no leading zeros  
    #      1 строка
    nl -n rz file.txt    # right, leading zeros
    # 000001 строка

4. Настройка формата:
    nl -i 5 file.txt     # шаг 5
    nl -v 100 file.txt   # начать с 100
    nl -w 3 file.txt     # ширина 3 символа
    nl -s ': ' file.txt  # разделитель ": "

5. Комбинированные опции:
    nl -n rz -w 3 -i 2 -v 10 file.txt
    # 010 строка1
    # 012 строка2

6. Из stdin:
    echo -e "a\nb\nc" | nl
    cat file.txt | nl

7. Разделитель строк:
    nl -s $'\t' file.txt    # табуляция
    nl -s ' | ' file.txt    # с палкой

8. Логические разделители:
    # Разделитель \: (backslash-colon)
    echo -e "строка1\n\\:\nстрока2" | nl
    #      1  строка1
    #      2  строка2

9. Несколько файлов:
    nl file1.txt file2.txt
    # Нумерация продолжается между файлами

10. Только тело документа (для man-like):
    nl -b a -n rz -w 3 -s '  '
    # Более читаемый вывод

11. Сброс нумерации:
    # С разделителем \:\: сбрасывается нумерация
    echo -e "a\nb\n\\:\:\nc\nd" | nl
    #      1  a
    #      2  b
    #      1  c
    #      2  d

12. Практические примеры:
    # Нумерация скрипта
    nl script.sh

    # Нумерация логов с временем
    tail -f app.log | nl

    # Создание списка файлов с номерами
    ls -1 | nl

    # Нумерация вывода ps
    ps aux | head -10 | nl

    # Нумерация с фильтром
    grep "ERROR" log.txt | nl

13. Сложный формат:
    nl -n rz -w 4 -s ') ' -v 100 -i 10 file.txt
    # 0100) строка1
    # 0110) строка2

14. В сочетании с другими командами:
    # Нумерация и сортировка
    sort file.txt | nl

    # Нумерация и поиск
    nl file.txt | grep "pattern"

    # Нумерация и выбор строк
    nl file.txt | sed -n '10,20p'

15. Кастомные разделители:
    nl -d AB file.txt  # использовать AB как разделитель секций

16. Для отладки:
    # Видеть номера строк с ошибками
    bash -x script.sh 2>&1 | nl

17. Создание оглавления:
    # Нумерация заголовков
    grep -n "^#" README.md | nl

18. Разные стили для разных частей:
    # Нельзя напрямую, но можно комбинировать
    { nl -b t часть1.txt; echo; nl -b a часть2.txt; }

19. Потоковая нумерация:
    # Непрерывная нумерация в pipe
    cat file1.txt file2.txt | nl

20. Альтернатива cat -n:
    nl ≈ cat -n
    # но nl имеет больше настроек

Особенности:
    По умолчанию не нумерует пустые строки (изменено опцией -b a)
    Поддерживает логические страницы через разделители
    Ширина по умолчанию 6 символов
    Можно настроить под любой стиль нумерации

Сравнение с другими командами:
    cat -n      # простейшая нумерация
    grep -n     # нумерация только найденных строк
    awk '{print NR": "$0}'  # полный контроль

Для скриптов:
    # Создание меню из списка
    echo "Выберите вариант:"
    nl options.txt | sed 's/^/  /'

    # Нумерация этапов
    echo "Этапы выполнения:"
    steps=("Подготовка" "Обработка" "Завершение")
    printf '%s\n' "${steps[@]}" | nl -s '. '

Ограничения:
    Максимальный номер: 2147483647
    Не поддерживает цветной вывод напрямую
    Для сложной логики лучше использовать awk/perl

Полезные алиасы:
    alias nll='nl -n ln -w 3 -s ": "'      # короткий формат
    alias nlz='nl -n rz -w 4'              # с ведущими нулями

Справка:
nl --help
man nl
