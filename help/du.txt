Инструкция по du

Основные опции:
du — размер текущей директории
du файл/директория — размер указанного объекта
du -s — суммарный размер
du -h — человеко-читаемые размеры
du -k — размер в килобайтах
du -m — размер в мегабайтах
du -b — размер в байтах

Сортировка и вывод:
du | sort -n — отсортировать по размеру
du -sh * — суммарный размер каждого элемента
du -sh */ — только директории
du -sh .[!.]* — только скрытые файлы и папки

Глубина:
du -d глубина — ограничить глубину
du --max-depth=N — то же что -d

Исключения:
du --exclude="шаблон" — исключить по шаблону
du --exclude-from=файл — исключить из списка

Файловые системы:
du -x — не выходить за пределы текущей ФС
du -l — считать hard links несколько раз
du -L — следовать симлинкам

Специальные опции:
du -c — показать общий итог
du --time — показать время изменения
du --apparent-size — видимый размер (не дисковый)
du --threshold=размер — показывать только больше указанного

Примеры:
du -sh — суммарный размер текущей директории
du -sh /var/log — размер лог директории
du -h --max-depth=1 — размеры поддиректорий первого уровня
du -h * | sort -h — сортировка по человеко-читаемому размеру
du -sh ~/.* — размер скрытых файлов в домашней директории
du -k | sort -n | tail -10 — 10 самых больших папок
du -b файл — точный размер файла в байтах
du -ch *.iso — суммарный размер ISO файлов с итогом
du -h --exclude="*.tmp" — исключить временные файлы
du -sh --apparent-size — видимый размер (для sparse файлов)
du -h --time — размер с временем изменения
du -h --threshold=100M — только больше 100МБ
du -ah | grep -E "\.(jpg|png)$" | sort -h — размеры картинок
du -sh /usr/* — размеры всех директорий в /usr
du -x / — размер только в корневой ФС (без других монтирований)
du -l 0 — только текущая директория (глубина 0)
du -h --si — размеры в единицах СИ (1000 вместо 1024)

Практическое использование:
du -sh ~/Downloads/ — чем занято место в загрузках
du -h /var | sort -h | tail -20 — 20 самых больших объектов в /var
du -h --max-depth=1 /home/ | sort -hr — размер домашних директорий
du -ah /path | sort -h | tail -50 — 50 самых больших файлов

Проверка дискового пространства:
df -h — свободное место на дисках
du -xh / | sort -h | tail -20 — что занимает место в корневой ФС
