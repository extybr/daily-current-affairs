Инструкция по df

Основные опции:
df — информация о всех файловых системах
df /path — информация о ФС содержащей путь
df -h — человеко-читаемые размеры
df -H — человеко-читаемые в СИ (1000 вместо 1024)
df -k — размеры в килобайтах
df -m — размеры в мегабайтах
df -i — информация об inodes

Типы ФС:
df -t тип — только указанный тип ФС
df -x тип — исключить указанный тип ФС
df -a — показать все ФС (включая pseudo)

Вывод:
df -T — показать тип файловой системы
df --output=поля — указать поля для вывода
df -l — только локальные ФС
df --total — показать итоговую строку

Поля для --output:
source — источник (устройство)
fstype — тип ФС
itotal — общее количество inodes
iused — использовано inodes
iavail — свободно inodes
ipcent — процент использования inodes
size — общий размер
used — использовано
avail — доступно
pcent — процент использования
target — точка монтирования

Примеры:
df -h — общая информация в читаемом формате
df -h /home — информация о ФС с домашней директорией
df -i / — использование inodes в корневой ФС
df -hT — с типами файловых систем
df -h --output=source,size,used,avail,pcent,target — кастомный вывод
df -ht ext4 — только ext4 ФС
df -hx tmpfs — исключить tmpfs
df -hl — только локальные файловые системы
df -a — все ФС включая /proc, /sys
df --total -h — с итоговой строкой
df -BM — размеры в мегабайтах
df -h | grep -v tmpfs — исключить tmpfs через grep
df -h /dev/sda* — информация по конкретному устройству
df -h --type=ext4 --type=xfs — несколько типов ФС

Практическое применение:
df -h | sort -k5 -h — отсортировать по проценту использования
watch -n 1 df -h — мониторинг в реальном времени
df -h | awk '$5 > 80 {print $0}' — ФС заполненные более 80%
df -h / /home /var — информация по нескольким путям

Inodes:
df -i — важно для ФС с множеством мелких файлов
df -ih — inodes в читаемом формате

Специальные опции:
df --sync — синхронизировать перед выводом
df --no-sync — не синхронизировать (быстрее)

Пример кастомного вывода:
    df --output=source,fstype,size,used,avail,pcent,target -h | column -t
    
Проверка переполнения:
    df -h | awk 'NR>1 && $5+0 > 90 {print "Внимание: " $1 " заполнен на " $5}'
    
Сетевые ФС:
df -h — показывает NFS, CIFS и другие сетевые ФС
df -lh — только локальные (исключает сетевые)

Сравнение с du:
df — свободное место на устройствах
du — использование места конкретными директориями
