Инструкция по find

Основной синтаксис:
find путь критерии действие

Пути:
. — текущая директория
/ — корневая директория
~ — домашняя директория
/путь/к/директории — абсолютный путь

Критерии поиска по имени:
find -name "шаблон" — поиск по имени (регистрозависимый)
find -iname "шаблон" — поиск по имени (регистронезависимый)
find -path "шаблон" — поиск по полному пути
find -ipath "шаблон" — регистронезависимый поиск по пути
find -regex "выражение" — поиск по регулярному выражению
find -iregex "выражение" — регистронезависимый regex

Критерии по типу:
find -type f — только файлы
find -type d — только директории
find -type l — только симлинки
find -type b — блочные устройства
find -type c — символьные устройства
find -type p — именованные каналы (pipes)
find -type s — сокеты

Критерии по времени:
find -mtime n — изменённые n*24 часа назад
find -mtime +n — изменённые более n дней назад
find -mtime -n — изменённые менее n дней назад
find -atime n — доступ по чтению n дней назад
find -ctime n — изменение статуса n дней назад
find -mmin n — изменённые n минут назад
find -amin n — доступ по чтению n минут назад
find -cmin n — изменение статуса n минут назад
find -newer файл — новее указанного файла
find -newerXY ссылка — сравнение с файлом-эталоном

Критерии по размеру:
find -size n — размер ровно n блоков (по умолчанию 512b)
find -size +n — размер больше n блоков
find -size -n — размер меньше n блоков
find -size n[cwbkMG] — размер в байтах (c), словах (w), блоках (b, k), мегабайтах (M), гигабайтах (G)

Критерии по правам:
find -perm режим — точное совпадение прав
find -perm -режим — все указанные биты установлены
find -perm /режим — любой из указанных битов установлен
find -user имя — принадлежит пользователю
find -group группа — принадлежит группе
find -nouser — нет владельца в /etc/passwd
find -nogroup — нет группы в /etc/group

Логические операторы:
find -a — И (по умолчанию)
find -o — ИЛИ
find -not или ! — НЕ
find \( выражение \) — группировка выражений

Действия:
find -print — напечатать (по умолчанию)
find -print0 — разделять нулевым байтом (для xargs -0)
find -ls — вывести в формате ls -dils
find -delete — удалить найденное
find -exec команда {} \; — выполнить команду для каждого
find -exec команда {} + — выполнить команду один раз со всеми аргументами
find -ok команда {} \; — подтверждение перед выполнением
find -prune — не спускаться в директорию

Примеры:
find . -name "*.txt" — все txt файлы в текущей директории
find / -type f -name "*.conf" — все conf файлы в системе
find . -type d -name "dir*" — директории начинающиеся на dir
find . -mtime -7 — изменённые за последние 7 дней
find . -size +100M — файлы больше 100 МБ
find . -type f -empty — пустые файлы
find . -perm 644 — файлы с правами 644
find . -user root — файлы принадлежащие root
find . \( -name "*.txt" -o -name "*.pdf" \) — txt ИЛИ pdf файлы
find . -type f -exec chmod 644 {} \; — изменить права на 644
find . -name "*.tmp" -delete — удалить все tmp файлы
find . -maxdepth 1 -type f — только в текущей директории (не рекурсивно)
find . -mindepth 2 -type f — начиная с глубины 2
find /var/log -name "*.log" -exec cp {} /backup/ \; — копировать логи в backup

Специальные параметры:
find -maxdepth n — максимальная глубина рекурсии
find -mindepth n — минимальная глубина рекурсии
find -follow — следовать симлинкам
find -L — следовать симлинкам (аналог -follow)
find -xtype t — проверять тип цели симлинка
